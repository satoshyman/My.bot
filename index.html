<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VTV Cloud Platform</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary-color: #00d4ff; --bg-color: #050505; --card-bg: #111; --gold: #f1c40f; }
        body { background: var(--bg-color); color: #fff; font-family: sans-serif; margin: 0; padding: 0; text-align: center; user-select: none; }
        .header { padding: 15px; background: #000; border-bottom: 2px solid #1a1a1a; position: sticky; top: 0; z-index: 100; }
        .bal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .bal-card { background: #0c0c0c; padding: 10px; border-radius: 15px; border: 1px solid #222; }
        .bal-card b { font-size: 16px; color: var(--primary-color); }
        .page { display: none; flex-direction: column; align-items: center; padding: 20px 5% 120px; }
        .page.active { display: flex; }
        .main-coin { width: 180px; height: 180px; border-radius: 50%; border: 4px solid var(--primary-color); box-shadow: 0 0 30px rgba(0,212,255,0.3); margin: 15px 0; }
        .mining-active { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .energy-bar { width: 100%; height: 10px; background: #222; border-radius: 5px; overflow: hidden; border: 1px solid #333; margin: 10px 0; }
        .energy-fill { height: 100%; background: linear-gradient(90deg, #ffcc00, #f1c40f); width: 0%; transition: 0.5s; }
        .card { background: var(--card-bg); width: 100%; padding: 15px; border-radius: 18px; border: 1px solid #222; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; text-align: right; box-sizing: border-box; }
        .btn { background: var(--primary-color); color: #000; border: none; padding: 12px 20px; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .btn:disabled { background: #333; color: #666; }
        .nav-menu { position: fixed; bottom: 15px; width: 90%; left: 5%; background: #111; display: flex; justify-content: space-around; padding: 12px 0; border-radius: 25px; border: 1px solid #222; }
        .nav-item { color: #555; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: var(--primary-color); }
        .wheel { width: 250px; height: 250px; border-radius: 50%; border: 5px solid #222; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); background: conic-gradient(#00d4ff 0 45deg, #111 45deg 90deg, #00d4ff 90deg 135deg, #111 135deg 180deg, #00d4ff 180deg 225deg, #111 225deg 270deg, #00d4ff 270deg 315deg, #111 315deg 360deg); }
    </style>
</head>
<body>

    <div class="header">
        <div class="bal-grid">
            <div class="bal-card"><span>Ù†Ù‚Ø§Ø· VTV</span><b id="vtv-bal">0</b></div>
            <div class="bal-card"><span>Ø±Ø¨Ø­ TON</span><b id="ton-bal">0.000</b></div>
        </div>
    </div>

    <div id="mine-page" class="page active">
        <div style="color:var(--gold); font-weight:bold; margin-bottom:10px;">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="display-lvl">1</span></div>
        <img src="https://i.ibb.co/LzY8v2m/VTV-COIN.jpg" class="main-coin" id="coin-img">
        <div id="timer" style="font-size:24px; margin-bottom:10px;">06:00:00</div>
        <div style="width:100%">
            <div style="display:flex; justify-content:space-between; font-size:12px;"><span>Ø§Ù„Ø·Ø§Ù‚Ø©</span><span id="energy-val">0</span>%</div>
            <div class="energy-bar"><div id="energy-fill" class="energy-fill"></div></div>
        </div>
        <button class="btn" id="start-btn" onclick="startMining()" style="width:100%; margin-top:15px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø© (6 Ø³Ø§Ø¹Ø§Øª)</button>
    </div>

    <div id="shop-page" class="page">
        <h3>Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„ØªØ±Ù‚ÙŠØ§Øª ğŸš€</h3>
        <div class="card" style="border-right: 4px solid var(--gold);">
            <div class="card-info"><h4>ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰</h4><p id="up-cost-txt">Ø§Ù„ØªÙƒÙ„ÙØ©: 2000 VTV</p></div>
            <button class="btn" id="up-btn" onclick="upgradeLevel()">ØªØ±Ù‚ÙŠØ©</button>
        </div>
        <div class="card">
            <div class="card-info"><h4>Ø´Ø­Ù† Ø·Ø§Ù‚Ø© 100%</h4><p>Ø§Ù„Ø³Ø¹Ø±: 500 VTV</p></div>
            <button class="btn" onclick="buyEnergy()">Ø´Ø±Ø§Ø¡</button>
        </div>
        <input type="text" id="promo-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø´Ø­Ù†" style="width:100%; padding:15px; margin:10px 0; background:#000; border:1px solid #333; color:#fff; border-radius:10px;">
        <button class="btn" onclick="redeemCode()" style="width:100%">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯</button>
        <div class="card" onclick="deposit('USDT', '5', 'Ø¹Ù†ÙˆØ§Ù†_Ù…Ø­ÙØ¸ØªÙƒ')" style="margin-top:15px;">
            <div style="text-align:right"><h4>Ø´Ø­Ù† Ù†Ù‚Ø§Ø· VTV</h4><p>50,000 VTV = 5 USDT</p></div>
            <i class="fas fa-wallet"></i>
        </div>
    </div>

    <div id="spin-page" class="page">
        <h3>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ğŸ¡</h3>
        <div class="wheel" id="wheel"></div>
        <button class="btn" id="spin-btn" onclick="spinWheel()" style="margin-top:20px; width:80%">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©</button>
        <p id="spin-timer" style="color:var(--gold); margin-top:10px;"></p>
    </div>

    <nav class="nav-menu">
        <div class="nav-item active" onclick="showPage('mine-page', this)"><i class="fas fa-hammer"></i><br>ØªØ¹Ø¯ÙŠÙ†</div>
        <div class="nav-item" onclick="showPage('spin-page', this)"><i class="fas fa-star"></i><br>Ø­Ø¸</div>
        <div class="nav-item" onclick="showPage('shop-page', this)"><i class="fas fa-store"></i><br>Ø§Ù„Ù…ØªØ¬Ø±</div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        let vtv = parseFloat(localStorage.getItem('vtv')) || 0;
        let ton = parseFloat(localStorage.getItem('ton')) || 0;
        let energy = parseInt(localStorage.getItem('energy')) || 0;
        let level = parseInt(localStorage.getItem('level')) || 1;
        let lastStart = parseInt(localStorage.getItem('last_start')) || 0;
        let lastSpin = parseInt(localStorage.getItem('last_spin')) || 0;

        function updateUI() {
            document.getElementById('vtv-bal').innerText = Math.floor(vtv).toLocaleString();
            document.getElementById('ton-bal').innerText = ton.toFixed(3);
            document.getElementById('energy-val').innerText = energy;
            document.getElementById('energy-fill').style.width = energy + "%";
            document.getElementById('display-lvl').innerText = level;
            
            let upCost = level * 2000;
            document.getElementById('up-cost-txt').innerText = level < 10 ? `Ø§Ù„ØªÙƒÙ„ÙØ©: ${upCost} VTV` : "Ù…Ø³ØªÙˆÙ‰ Ø£Ù‚ØµÙ‰";
            document.getElementById('up-btn').disabled = level >= 10;

            const now = Date.now();
            if (lastStart > 0 && (now - lastStart) < 21600000) {
                document.getElementById('start-btn').disabled = true;
                document.getElementById('coin-img').classList.add('mining-active');
                let rem = 21600000 - (now - lastStart);
                let h = Math.floor(rem/3600000), m = Math.floor((rem%3600000)/60000), s = Math.floor((rem%60000)/1000);
                document.getElementById('timer').innerText = `${h}:${m}:${s}`;
            } else {
                document.getElementById('start-btn').disabled = energy < 100;
                document.getElementById('coin-img').classList.remove('mining-active');
                document.getElementById('timer').innerText = "06:00:00";
            }
            
            if(now - lastSpin < 86400000) {
                document.getElementById('spin-btn').disabled = true;
                document.getElementById('spin-timer').innerText = "Ø¹Ø¯ ØºØ¯Ø§Ù‹ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø©!";
            }

            localStorage.setItem('vtv', vtv); localStorage.setItem('ton', ton);
            localStorage.setItem('energy', energy); localStorage.setItem('level', level);
        }

        function startMining() {
            if(energy >= 100) { energy = 0; lastStart = Date.now(); ton += (0.025 * level); localStorage.setItem('last_start', lastStart); updateUI(); }
        }

        function upgradeLevel() {
            let cost = level * 2000;
            if(vtv >= cost && level < 10) { vtv -= cost; level++; updateUI(); }
        }

        function buyEnergy() { if(vtv >= 500) { vtv -= 500; energy = 100; updateUI(); } }

        function spinWheel() {
            let deg = Math.floor(Math.random() * 3600) + 720;
            document.getElementById('wheel').style.transform = `rotate(${deg}deg)`;
            lastSpin = Date.now(); localStorage.setItem('last_spin', lastSpin);
            setTimeout(() => { vtv += 500; updateUI(); tg.showAlert("Ø±Ø¨Ø­Øª 500 VTV!"); }, 4000);
        }

        function deposit(c, a, w) { tg.sendData(JSON.stringify({action:'deposit', coin:c, amt:a})); alert("Ø£Ø±Ø³Ù„ ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„Ù€ @egipcioman"); }
        function redeemCode() { let c = document.getElementById('promo-input').value; if(c) tg.sendData(JSON.stringify({action:'redeem', code:c})); }
        function showPage(id, el) { document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); document.getElementById(id).classList.add('active'); document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active')); el.classList.add('active'); }

        setInterval(updateUI, 1000);
        updateUI();
    </script>
</body>
</html>
