<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Cloud Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --ton-blue: #0088cc; --dark-bg: #0b0e11; --card-bg: #151921; }
        body { background: var(--dark-bg); color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; text-align: center; user-select: none; }
        
        .header { padding: 25px 15px; background: var(--card-bg); border-bottom: 2px solid #1f2630; position: sticky; top: 0; z-index: 1000; }
        .ton-logo { width: 80px; filter: drop-shadow(0 0 10px var(--ton-blue)); }
        .balance { font-size: 36px; font-weight: bold; color: var(--ton-blue); margin: 10px 0; letter-spacing: 1px; }
        
        .page { display: none; padding: 20px 5% 120px; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card { background: var(--card-bg); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid #232d38; text-align: right; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .btn { background: var(--ton-blue); color: white; border: none; padding: 15px; border-radius: 15px; font-weight: bold; width: 100%; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); opacity: 0.9; }
        .btn:disabled { background: #2c353d; color: #5c6c7a; cursor: not-allowed; }

        /* Wheel Styles */
        .wheel-container { position: relative; width: 280px; height: 280px; margin: 30px auto; }
        .wheel { width: 100%; height: 100%; border-radius: 50%; border: 8px solid #1f2630; background: conic-gradient(#0088cc 0deg 45deg, #090b0e 45deg 90deg, #0088cc 90deg 135deg, #090b0e 135deg 180deg, #0088cc 180deg 225deg, #090b0e 225deg 270deg, #0088cc 270deg 315deg, #090b0e 315deg 360deg); transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); box-shadow: 0 0 40px rgba(0, 136, 204, 0.2); }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #ff4b5c; z-index: 10; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5)); }

        .nav { position: fixed; bottom: 15px; width: 92%; left: 4%; background: rgba(21, 25, 33, 0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; padding: 12px 0; border-radius: 25px; border: 1px solid #232d38; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .nav-item { color: #5c6c7a; font-size: 11px; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--ton-blue); transform: translateY(-3px); }
        .nav-item i { font-size: 20px; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div class="header">
        <img src="https://ton.org/download/ton_symbol.png" class="ton-logo">
        <div class="balance"><span id="u-bal">0.00000</span> TON</div>
        <div style="font-size: 13px; color: #8b949e;"><i class="fas fa-shield-alt"></i> Ø§Ù„Ø®Ø·Ø©: <span id="p-name">Ù…Ø¬Ø§Ù†ÙŠØ©</span></div>
    </div>

    <div id="m-pg" class="page active">
        <div class="card">
            <h3 style="margin-top:0"><i class="fas fa-microchip"></i> Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</h3>
            <p id="timer-txt" style="font-size: 28px; text-align: center; color: var(--ton-blue); font-weight: bold; margin: 15px 0;">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡</p>
            <button class="btn" id="m-btn" onclick="startM()">Ø¥Ø¨Ø¯Ø£ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</button>
        </div>
        <div class="card" style="font-size: 14px; line-height: 1.6; color: #a1b0bc;">
            <i class="fas fa-info-circle"></i> <b>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø·Ø©:</b><br>
            â€¢ ØªØµÙ„ Ù„Ù€ 1 TON Ø®Ù„Ø§Ù„ 8 Ø£ÙŠØ§Ù… (Ù…Ø¬Ø§Ù†ÙŠ)<br>
            â€¢ Ø¯ÙˆØ±Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ØªØªØ¬Ø¯Ø¯ ÙƒÙ„ 6 Ø³Ø§Ø¹Ø§Øª.
        </div>
    </div>

    <div id="w-pg" class="page">
        <div class="card">
            <h3><i class="fas fa-wallet"></i> Ø·Ù„Ø¨ Ø³Ø­Ø¨</h3>
            <p style="font-size: 14px;">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨: <b>1.00 TON</b></p>
            <button class="btn" onclick="withD()">Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>
        </div>
        <div class="card">
            <h3><i class="fas fa-users"></i> Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</h3>
            <p style="font-size: 14px;">Ø§ÙƒØ³Ø¨ <b>0.0001 TON</b> Ø¹Ù† ÙƒÙ„ Ø¯Ø¹ÙˆØ© Ù†Ø§Ø¬Ø­Ø©.</p>
            <button class="btn" style="background:#1f2630" onclick="copyR()">Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ©</button>
        </div>
    </div>

    <div id="s-pg" class="page">
        <h3 style="margin-bottom:20px">ØªØ·ÙˆÙŠØ± Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ğŸš€</h3>
        <div class="card">
            <h4>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1 <span style="float:left; color:var(--ton-blue)">1$</span></h4>
            <p style="font-size:13px">ØªØµÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ ÙÙŠ <b>6 Ø£ÙŠØ§Ù…</b> ÙÙ‚Ø·.</p>
            <button class="btn" onclick="tg.showAlert('ØªÙˆØ§ØµÙ„ Ù…Ø¹ @Admin Ù„ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1')">Ø´Ø±Ø§Ø¡ Ø§Ù„ØªØ±Ù‚ÙŠØ©</button>
        </div>
        <div class="card">
            <h4>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2 <span style="float:left; color:var(--ton-blue)">3$</span></h4>
            <p style="font-size:13px">ØªØµÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ ÙÙŠ <b>4 Ø£ÙŠØ§Ù…</b> ÙÙ‚Ø·.</p>
            <button class="btn" onclick="tg.showAlert('ØªÙˆØ§ØµÙ„ Ù…Ø¹ @Admin Ù„ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2')">Ø´Ø±Ø§Ø¡ Ø§Ù„ØªØ±Ù‚ÙŠØ©</button>
        </div>
        <div class="card">
            <h4>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3 <span style="float:left; color:var(--ton-blue)">5$</span></h4>
            <p style="font-size:13px">ØªØµÙ„ Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ ÙÙŠ <b>ÙŠÙˆÙ…ÙŠÙ† ÙˆØ±Ø¨Ø¹</b>.</p>
            <button class="btn" onclick="tg.showAlert('ØªÙˆØ§ØµÙ„ Ù…Ø¹ @Admin Ù„ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3')">Ø´Ø±Ø§Ø¡ Ø§Ù„ØªØ±Ù‚ÙŠØ©</button>
        </div>
    </div>

    <div id="e-pg" class="page">
        <div class="card">
            <h3>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ğŸ¡</h3>
            <div class="wheel-container">
                <div class="pointer"></div>
                <div id="wheel" class="wheel"></div>
            </div>
            <button class="btn" id="s-btn" onclick="spin()">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹</button>
        </div>
        <div class="card">
            <h3>Ù…Ù‡Ø§Ù… Ø³Ø±ÙŠØ¹Ø©</h3>
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-size:13px">ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… (+0.00001)</span>
                <button class="btn" style="width:80px; padding:8px" onclick="doT()">ØªÙ†ÙÙŠØ°</button>
            </div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="showP('m-pg', this)"><i class="fas fa-hammer"></i><br>ØªØ¹Ø¯ÙŠÙ†</div>
        <div class="nav-item" onclick="showP('w-pg', this)"><i class="fas fa-wallet"></i><br>Ø³Ø­Ø¨</div>
        <div class="nav-item" onclick="showP('s-pg', this)"><i class="fas fa-rocket"></i><br>ØªØ±Ù‚ÙŠØ©</div>
        <div class="nav-item" onclick="showP('e-pg', this)"><i class="fas fa-gift"></i><br>Ø­Ø¸</div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();

        let bal = parseFloat(localStorage.getItem('t_bal')) || 0;
        let plan = parseInt(localStorage.getItem('t_plan')) || 0;
        let lastM = parseInt(localStorage.getItem('t_last_m')) || 0;
        let lastS = parseInt(localStorage.getItem('t_last_s')) || 0;

        const pData = [
            { n: "Ù…Ø¬Ø§Ù†ÙŠØ©", r: 1/32 }, { n: "Ù…Ø³ØªÙˆÙ‰ 1", r: 1/24 },
            { n: "Ù…Ø³ØªÙˆÙ‰ 2", r: 1/16 }, { n: "Ù…Ø³ØªÙˆÙ‰ 3", r: 1/9 }
        ];

        function updateUI() {
            document.getElementById('u-bal').innerText = bal.toFixed(5);
            document.getElementById('p-name').innerText = pData[plan].n;
            const now = Date.now();
            const wait = 21600000; // 6 hours
            if (lastM && (now - lastM < wait)) {
                document.getElementById('m-btn').disabled = true;
                runTimer(wait - (now - lastM));
            } else {
                document.getElementById('m-btn').disabled = false;
                document.getElementById('timer-txt').innerText = "Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ†";
            }
            localStorage.setItem('t_bal', bal);
            localStorage.setItem('t_plan', plan);
        }

        function startM() {
            bal += pData[plan].r; lastM = Date.now();
            localStorage.setItem('t_last_m', lastM);
            updateUI();
            tg.HapticFeedback.impactOccurred('heavy');
            tg.sendData(JSON.stringify({a: 'sync', b: bal, p: plan}));
            tg.showAlert(`ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ†! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${pData[plan].r.toFixed(4)} TON`);
        }

        function spin() {
            const now = Date.now();
            if (now - lastS < 86400000) return tg.showAlert("Ø¹Ø¯ Ø¨Ø¹Ø¯ 24 Ø³Ø§Ø¹Ø©!");
            document.getElementById('s-btn').disabled = true;
            const deg = Math.floor(Math.random() * 360) + 1800;
            document.getElementById('wheel').style.transform = `rotate(${deg}deg)`;
            setTimeout(() => {
                let win = Math.random() * (0.001 - 0.00001) + 0.00001;
                bal += win; lastS = Date.now();
                localStorage.setItem('t_last_s', lastS);
                updateUI();
                tg.showAlert(`ğŸ‰ Ø±Ø¨Ø­Øª ${win.toFixed(6)} TON`);
            }, 4100);
        }

        function runTimer(ms) {
            let s = Math.floor(ms/1000);
            let i = setInterval(() => {
                let h = Math.floor(s/3600), m = Math.floor((s%3600)/60), sec = s%60;
                document.getElementById('timer-txt').innerText = `${h}:${m}:${sec}`;
                if (--s < 0) { clearInterval(i); updateUI(); }
            }, 1000);
        }

        function withD() {
            if (bal >= 1) tg.showAlert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.");
            else tg.showAlert("ØªØ­ØªØ§Ø¬ 1.00 TON Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø³Ø­Ø¨.");
        }

        function copyR() {
            const link = `https://t.me/${tg.initDataUnsafe.user.id}`; // Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙˆØª
            tg.showAlert("Ø§Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ù…Ù† Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.");
        }

        function showP(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        updateUI();
    </script>
</body>
</html>
